# Maintainer: Matthieu Rakotojaona <matthieu.rakotojaona@gmail.com>

pkgname=idlewatch
pkgver=0.1.1
pkgrel=1
epoch=
pkgdesc='Watch and synchronize an IMAP mailbox'
arch=('i686' 'x86_64')
url='https://github.com/rakoo/idlewatch'
license=('CC0')
groups=()
makedepends=('go')
source=("https://github.com/rakoo/idlewatch/archive/v${pkgver}.zip")
sha256sums=(35c94c75a0c1ba4c067e84845803367c28e98052b56efcc87a55acddc6a5a89d)

build() {
  cd "$srcdir/$pkgname-$pkgver"
  go build -o idlewatch
}

package() {
  cd "$srcdir/$pkgname-$pkgver"

  # systemctl service file
  install -D -m644  'idlewatch.service' "$pkgdir/usr/lib/systemd/user/idlewatch.service"

  # idlewatch binary
  install -D -m755 'idlewatch' "$pkgdir/usr/bin/$pkgname"

  # license
  install -Dm644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}
